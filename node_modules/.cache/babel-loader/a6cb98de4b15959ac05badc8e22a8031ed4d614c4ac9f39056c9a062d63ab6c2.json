{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{updateFormField,setCaptchaInput,setCaptchaCode,resetForm,setSubmitting,setSubmitSuccess}from'../store/slices/enquirySlice';import'./EnquiryModal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EnquiryModal=_ref=>{let{isOpen,onClose}=_ref;const dispatch=useDispatch();const{formData,captchaInput,captchaCode,isSubmitting}=useSelector(state=>state.enquiry);// Generate random alphanumeric captcha\nconst generateCaptcha=()=>{const chars='ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789';let code='';for(let i=0;i<6;i++){code+=chars.charAt(Math.floor(Math.random()*chars.length));}dispatch(setCaptchaCode(code));dispatch(setCaptchaInput(''));};useEffect(()=>{if(isOpen){generateCaptcha();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[isOpen]);const handleChange=e=>{dispatch(updateFormField({field:e.target.name,value:e.target.value}));};const handleCaptchaChange=e=>{dispatch(setCaptchaInput(e.target.value));};const handleSubmit=e=>{e.preventDefault();// Validate captcha\nif(captchaInput!==captchaCode){alert('Captcha does not match. Please try again.');generateCaptcha();return;}// Validate required fields\nif(!formData.name||!formData.phone||!formData.email||!formData.enquiry){alert('Please fill in all required fields');return;}dispatch(setSubmitting(true));// Simulate API call\nsetTimeout(()=>{console.log('Form submitted:',formData);alert('Thank you for your enquiry! We will contact you soon.');dispatch(setSubmitSuccess(true));dispatch(resetForm());onClose();},500);};const handleOverlayClick=e=>{if(e.target.classList.contains('modal-overlay')){onClose();}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:handleOverlayClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Request a Call\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"enquiry-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Enter your full name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Phone Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",name:\"phone\",value:formData.phone,onChange:handleChange,placeholder:\"Enter your phone number\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:\"Enter your email address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"enquiry\",children:\"Enquiry *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"enquiry\",name:\"enquiry\",value:formData.enquiry,onChange:handleChange,placeholder:\"Please describe your cleaning requirements...\",rows:\"4\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group captcha-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"captcha\",children:\"Security Check *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"captcha-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"captcha-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"captcha-code\",children:captchaCode}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"captcha-refresh\",onClick:generateCaptcha,title:\"Refresh Captcha\",children:\"\\uD83D\\uDD04\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"captcha\",value:captchaInput,onChange:handleCaptchaChange,placeholder:\"Enter the code above\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-btn\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:isSubmitting,children:isSubmitting?'Submitting...':'Submit Enquiry'})]})]})]})});};export default EnquiryModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}